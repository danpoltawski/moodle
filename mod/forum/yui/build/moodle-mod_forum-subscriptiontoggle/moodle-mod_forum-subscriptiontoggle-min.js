YUI.add("moodle-mod_forum-subscriptiontoggle",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}a.extend(c,a.Base,{initializer:function(){a.delegate("click",this._toggleSubscription,a.config.doc.body,".discussionsubscription .discussiontoggle",this)},_toggleSubscription:function(b){var c=b.currentTarget;a.io(this.get("uri"),{data:{sesskey:M.cfg.sesskey,forumid:c.getData("forumid"),discussionid:c.getData("discussionid"),includetext:c.getData("includetext")},context:this,arguments:{clickedLink:c},on:{complete:this._handleCompletion}}),b.preventDefault()},_handleCompletion:function(b,c,d){var e;try{if(e=a.JSON.parse(c.response),e.error)return a.use("moodle-core-notification-ajaxexception",function(){return new M.core.ajaxException(e)}),this}catch(f){return a.use("moodle-core-notification-exception",function(){return new M.core.exception(f)}),this}if(e.icon){var g=d.clickedLink.ancestor(".discussionsubscription");g&&g.set("innerHTML",e.icon)}}},{NAME:"subscriptionToggle",ATTRS:{uri:{value:M.cfg.wwwroot+"/mod/forum/subscribe_ajax.php"}}});var d=a.namespace("M.mod_forum.subscriptiontoggle");d.init=function(a){return new c(a)}},"@VERSION@",{requires:["base-base","io-base"]});