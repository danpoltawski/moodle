YUI.add("moodle-editor_atto-menu",function(a,b){var c='<div class="open {{config.buttonClass}} atto_menu" style="min-width:{{config.innerOverlayWidth}};"><ul class="dropdown-menu">{{#each config.items}}<li role="presentation" class="atto_menuentry"><a href="#" role="menuitem" data-index="{{@index}}" {{#each data}}data-{{@key}}="{{this}}"{{/each}}>{{{text}}}</a></li>{{/each}}</ul></div>',d=function(){d.superclass.constructor.apply(this,arguments)};a.extend(d,M.core.dialogue,{_menuHandlers:null,initializer:function(b){var d,e;this._menuHandlers=[];var f=a.Handlebars.compile(c),g=a.Node.create(f({config:b}));this.set("bodyContent",g),e=this.get("boundingBox"),e.addClass("editor_atto_controlmenu"),e.addClass("editor_atto_menu"),e.one(".moodle-dialogue-wrap").removeClass("moodle-dialogue-wrap").addClass("moodle-dialogue-content"),d=a.Node.create("<h3/>").addClass("accesshide").setHTML(this.get("headerText")),this.get("bodyContent").prepend(d),this.headerNode.hide(),this.footerNode.hide(),this._setupHandlers()},_setupHandlers:function(){var a=this.get("contentBox");this._menuHandlers.push(a.delegate("key",this._chooseMenuItem,"32, enter",".atto_menuentry",this),a.delegate("key",this._handleKeyboardEvent,"down:38,40",".dropdown-menu",this),a.on("focusoutside",this.hide,this),a.delegate("key",this.hide,"down:37,39,esc",".dropdown-menu",this))},_chooseMenuItem:function(a){a.target.simulate("click"),a.preventDefault()},hide:function(a){if(this.get("preventHideMenu")!==!0)return a&&a.preventDefault(),d.superclass.hide.call(this,arguments)},_handleKeyboardEvent:function(a){a.preventDefault();for(var b,c=a.currentTarget.all('a[role="menuitem"]'),d=!1,e=0,f=1,g=0,h=a.target.ancestor('a[role="menuitem"]',!0);!d&&e<c.size();)c.item(e)===h?d=!0:e++;if(d){38===a.keyCode&&(f=-1);do e+=f,e<0?e=c.size()-1:e>=c.size()&&(e=0),b=c.item(e),g++;while(g<c.size()&&b!==h&&b.hasAttribute("hidden"));b&&b.focus(),a.preventDefault(),a.stopImmediatePropagation()}}},{NAME:"menu",ATTRS:{headerText:{value:""}}}),a.Base.modifyAttrs(d,{width:{value:"auto"},hideOn:{value:[{eventName:"clickoutside"}]},extraClasses:{value:["editor_atto_menu"]},responsive:{value:!1},visible:{value:!1},center:{value:!1},closeButton:{value:!1}}),a.namespace("M.editor_atto").Menu=d},"@VERSION@",{requires:["moodle-core-notification-dialogue","node","event","event-custom"]});