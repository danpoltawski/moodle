YUI.add("moodle-atto_indent-button",function(a,b){a.namespace("M.atto_indent").Button=a.Base.create("button",a.M.editor_atto.EditorPlugin,[],{initializer:function(){this.addButton({icon:"e/decrease_indent",title:"outdent",buttonName:"outdent",callback:this.outdent}),this.addButton({icon:"e/increase_indent",title:"indent",buttonName:"indent",callback:this.indent})},indent:function(){var a=window.rangy.saveSelection(),b=this.editor.all("blockquote"),c=b.size();this.editor.all(".rangySelectionBoundary").setStyle("display",null),b.addClass("pre-existing"),document.execCommand("indent",!1,null),b=this.editor.all("blockquote"),b.size()!==c?(this.replaceBlockquote(this.editor),window.rangy.restoreSelection(a)):b.size()>0&&b.removeClass("pre-existing"),window.rangy.removeMarkers(a),this.markUpdated()},outdent:function(){var a=window.rangy.saveSelection(),b=this.editor.all("blockquote"),c=b.size();b.addClass("pre-existing"),this.replaceEditorIndents(this.editor),window.rangy.restoreSelection(a),a=window.rangy.saveSelection(),document.execCommand("outdent",!1,null),b=this.editor.all("blockquote"),b.size()!==c?(this.replaceBlockquote(this.editor),window.rangy.restoreSelection(a)):b.size()>0&&b.removeClass("pre-existing"),window.rangy.removeMarkers(a),this.markUpdated()},replaceBlockquote:function(b){b.all("blockquote").setAttribute("data-iterate",!0);for(var c=b.one("blockquote"),d=a.one("body.dir-ltr")?"marginLeft":"marginRight";c;){if(c.removeAttribute("data-iterate"),c.hasClass("pre-existing"))c.removeClass("pre-existing");else{var e,f=a.Node.create("<div></div>").setAttrs(c.getAttrs()).setStyle(d,"30px").addClass("editor-indent"),g=c.getDOMNode().childNodes;for(e=g[0];"undefined"!=typeof e;)f.append(e),e=g[0];c.replace(f)}c=b.one("blockquote[data-iterate]")}},replaceEditorIndents:function(b){for(var c=b.one(".editor-indent");c;){var d,e=a.Node.create("<blockquote></blockquote>").setAttrs(c.getAttrs()).removeClass("editor-indent"),f=c.getDOMNode().childNodes;for(d=f[0];"undefined"!=typeof d;)e.append(d),d=f[0];c.replace(e),c=b.one(".editor-indent")}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});