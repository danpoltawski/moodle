YUI.add("moodle-form-showadvanced",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}var d={FIELDSETCONTAINSADVANCED:"fieldset.containsadvancedelements",DIVFITEMADVANCED:"div.fitem.advanced",DIVFCONTAINER:"div.fcontainer",MORELESSLINK:"fieldset.containsadvancedelements .moreless-toggler"},e={SHOW:"show",MORELESSACTIONS:"moreless-actions",MORELESSTOGGLER:"moreless-toggler",SHOWLESS:"moreless-less"},f={FITEM:'<div class="fitem"></div>',FELEMENT:'<div class="felement"></div>'},g={};g.formid={value:null},a.extend(c,a.Base,{initializer:function(){var b=a.one("#"+this.get("formid")),c=b.all(d.FIELDSETCONTAINSADVANCED);c.each(this.processFieldset,this),b.delegate("click",this.switchState,d.MORELESSLINK),b.delegate("key",this.switchState,"down:enter,32",d.MORELESSLINK)},processFieldset:function(b){var c=a.one("input[name=mform_showmore_"+b.get("id")+"]");if(!c)return this;var g=a.Node.create('<a href="#"></a>');g.addClass(e.MORELESSTOGGLER),"0"===c.get("value")?g.setHTML(M.util.get_string("showmore","form")):(g.setHTML(M.util.get_string("showless","form")),g.addClass(e.SHOWLESS),b.all(d.DIVFITEMADVANCED).addClass(e.SHOW));var h=[];b.all(d.DIVFITEMADVANCED).each(function(a){h[h.length]=a.generateID()}),g.setAttribute("role","button"),g.setAttribute("aria-controls",h.join(" "));var i=a.Node.create(f.FITEM);i.addClass(e.MORELESSACTIONS);var j=a.Node.create(f.FELEMENT);return j.append(g),i.append(j),b.one(d.DIVFCONTAINER).append(i),this},switchState:function(b){b.preventDefault();var c=this.ancestor(d.FIELDSETCONTAINSADVANCED);c.all(d.DIVFITEMADVANCED).toggleClass(e.SHOW);var f=a.one("input[name=mform_showmore_"+c.get("id")+"]");"0"===f.get("value")?(f.set("value",1),this.addClass(e.SHOWLESS),this.setHTML(M.util.get_string("showless","form"))):(f.set("value",0),this.removeClass(e.SHOWLESS),this.setHTML(M.util.get_string("showmore","form")))}},{NAME:"moodle-form-showadvanced",ATTRS:g}),M.form=M.form||{},M.form.showadvanced=M.form.showadvanced||function(a){return new c(a)}},"@VERSION@",{requires:["node","base","selector-css3"]});