YUI.add("moodle-core-widget-focusafterclose",function(a,b){function c(){a.after(this._bindUIFocusAfterHide,this,"bindUI"),this.get("rendered")&&this._bindUIFocusAfterHide()}var d='input:not([type="hidden"]), a[href], button, textarea, select, [tabindex], [contenteditable="true"]';c.ATTRS={focusOnPreviousTargetAfterHide:{value:!1},focusAfterHide:{value:null,type:a.Node}},c.prototype={_uiHandlesFocusAfterHide:[],_showFocusAfterHide:null,_previousTargetFocusAfterHide:null,initializer:function(){this.get("focusOnPreviousTargetAfterHide")&&this.show&&(this._showFocusAfterHide=this.show,this.show=function(a){this._showFocusAfterHide.apply(this,arguments),this._previousTargetFocusAfterHide=null,a&&a.currentTarget&&(this._previousTargetFocusAfterHide=a.currentTarget)})},destructor:function(){new a.EventHandle(this.uiHandleFocusAfterHide).detach()},_bindUIFocusAfterHide:function(){new a.EventHandle(this.uiHandleFocusAfterHide).detach(),this.uiHandleFocusAfterHide=[this.after("visibleChange",this._afterHostVisibleChangeFocusAfterHide)]},_afterHostVisibleChangeFocusAfterHide:function(){this.get("visible")||this._attemptFocus(this._previousTargetFocusAfterHide)||this._attemptFocus(this.get("focusAfterHide"))},_attemptFocus:function(b){var c=a.one(b);return!(!c||!(c=c.ancestor(d,!0)))&&(c.focus(),!0)}};var e=a.namespace("M.core");e.WidgetFocusAfterHide=c},"@VERSION@",{requires:["base-build","widget"]});