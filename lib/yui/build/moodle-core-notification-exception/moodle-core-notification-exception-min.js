YUI.add("moodle-core-notification-exception",function(a,b){var c,d,e,f,g,h,i;c="moodle-dialogue",d="notificationBase",e="yesLabel",f="noLabel",g="title",h="question",i={BASE:"moodle-dialogue-base",WRAP:"moodle-dialogue-wrap",HEADER:"moodle-dialogue-hd",BODY:"moodle-dialogue-bd",CONTENT:"moodle-dialogue-content",FOOTER:"moodle-dialogue-ft",HIDDEN:"hidden",LIGHTBOX:"moodle-dialogue-lightbox"},M.core=M.core||{};var j,k="Moodle exception";j=function(b){var c=a.mix({},b);c.width=c.width||M.cfg.developerdebug?Math.floor(a.one(document.body).get("winWidth")/3)+"px":null,c.closeButton=!0;var d=["message","name","fileName","lineNumber","stack"];a.Array.each(d,function(a){c[a]=b[a]}),j.superclass.constructor.apply(this,[c])},a.extend(j,M.core.notification.info,{_hideTimeout:null,_keypress:null,initializer:function(b){var c,e=this,f=this.get("hideTimeoutDelay");this.get(d).addClass("moodle-dialogue-exception"),this.setStdModContent(a.WidgetStdMod.HEADER,'<h1 id="moodle-dialogue-'+b.COUNT+'-header-text">'+a.Escape.html(b.name)+"</h1>",a.WidgetStdMod.REPLACE),c=a.Node.create('<div class="moodle-exception" data-rel="fatalerror"></div>').append(a.Node.create('<div class="moodle-exception-message">'+a.Escape.html(this.get("message"))+"</div>")).append(a.Node.create('<div class="moodle-exception-param hidden param-filename"><label>File:</label> '+a.Escape.html(this.get("fileName"))+"</div>")).append(a.Node.create('<div class="moodle-exception-param hidden param-linenumber"><label>Line:</label> '+a.Escape.html(this.get("lineNumber"))+"</div>")).append(a.Node.create('<div class="moodle-exception-param hidden param-stacktrace"><label>Stack trace:</label> <pre>'+this.get("stack")+"</pre></div>")),M.cfg.developerdebug&&c.all(".moodle-exception-param").removeClass("hidden"),this.setStdModContent(a.WidgetStdMod.BODY,c,a.WidgetStdMod.REPLACE),f&&(this._hideTimeout=setTimeout(function(){e.hide()},f)),this.after("visibleChange",this.visibilityChanged,this),this._keypress=a.on("key",this.hide,window,"down:13,27",this),this.centerDialogue()},visibilityChanged:function(a){if("visible"===a.attrName&&a.prevVal&&!a.newVal){this._keypress&&this._keypress.detach();var b=this;setTimeout(function(){b.destroy()},1e3)}}},{NAME:k,CSS_PREFIX:c,ATTRS:{message:{value:""},name:{value:""},fileName:{value:""},lineNumber:{value:""},stack:{setter:function(b){var c,d=a.Escape.html(b).split("\n"),e=new RegExp("^(.+)@("+M.cfg.wwwroot+")?(.{0,75}).*:(\\d+)$");for(c in d)d[c]=d[c].replace(e,"<div class='stacktrace-line'>ln: $4</div><div class='stacktrace-file'>$3</div><div class='stacktrace-call'>$1</div>");return d.join("")},value:""},hideTimeoutDelay:{validator:a.Lang.isNumber,value:null}}}),M.core.exception=j},"@VERSION@",{requires:["moodle-core-notification-dialogue"]});