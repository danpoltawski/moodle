YUI.add("moodle-core-notification-ajaxexception",function(a,b){var c,d,e,f,g,h,i;c="moodle-dialogue",d="notificationBase",e="yesLabel",f="noLabel",g="title",h="question",i={BASE:"moodle-dialogue-base",WRAP:"moodle-dialogue-wrap",HEADER:"moodle-dialogue-hd",BODY:"moodle-dialogue-bd",CONTENT:"moodle-dialogue-content",FOOTER:"moodle-dialogue-ft",HIDDEN:"hidden",LIGHTBOX:"moodle-dialogue-lightbox"},M.core=M.core||{};var j,k="Moodle AJAX exception";j=function(a){a.name=a.name||"Error",a.closeButton=!0,j.superclass.constructor.apply(this,[a])},a.extend(j,M.core.notification.info,{_keypress:null,initializer:function(b){var c,e=this,f=this.get("hideTimeoutDelay");this.get(d).addClass("moodle-dialogue-exception"),this.setStdModContent(a.WidgetStdMod.HEADER,'<h1 id="moodle-dialogue-'+this.get("COUNT")+'-header-text">'+a.Escape.html(b.name)+"</h1>",a.WidgetStdMod.REPLACE),c=a.Node.create('<div class="moodle-ajaxexception" data-rel="fatalerror"></div>').append(a.Node.create('<div class="moodle-exception-message">'+a.Escape.html(this.get("error"))+"</div>")).append(a.Node.create('<div class="moodle-exception-param hidden param-debuginfo"><label>URL:</label> '+this.get("reproductionlink")+"</div>")).append(a.Node.create('<div class="moodle-exception-param hidden param-debuginfo"><label>Debug info:</label> '+a.Escape.html(this.get("debuginfo"))+"</div>")).append(a.Node.create('<div class="moodle-exception-param hidden param-stacktrace"><label>Stack trace:</label> <pre>'+a.Escape.html(this.get("stacktrace"))+"</pre></div>")),M.cfg.developerdebug&&c.all(".moodle-exception-param").removeClass("hidden"),this.setStdModContent(a.WidgetStdMod.BODY,c,a.WidgetStdMod.REPLACE),f&&(this._hideTimeout=setTimeout(function(){e.hide()},f)),this.after("visibleChange",this.visibilityChanged,this),this._keypress=a.on("key",this.hide,window,"down:13, 27",this),this.centerDialogue()},visibilityChanged:function(a){if("visible"===a.attrName&&a.prevVal&&!a.newVal){var b=this;this._keypress.detach(),setTimeout(function(){b.destroy()},1e3)}}},{NAME:k,CSS_PREFIX:c,ATTRS:{error:{validator:a.Lang.isString,value:M.util.get_string("unknownerror","moodle")},debuginfo:{value:null},stacktrace:{value:null},reproductionlink:{setter:function(b){return null!==b&&(b=a.Escape.html(b),b='<a href="'+b+'">'+b.replace(M.cfg.wwwroot,"")+"</a>"),b},value:null},hideTimeoutDelay:{validator:a.Lang.isNumber,value:null}}}),M.core.ajaxException=j},"@VERSION@",{requires:["moodle-core-notification-dialogue"]});