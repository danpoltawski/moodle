YUI.add("moodle-core-notification-dialogue",function(a,b){var c,d,e,f,g,h,i;c="moodle-dialogue",d="notificationBase",e="yesLabel",f="noLabel",g="title",h="question",i={BASE:"moodle-dialogue-base",WRAP:"moodle-dialogue-wrap",HEADER:"moodle-dialogue-hd",BODY:"moodle-dialogue-bd",CONTENT:"moodle-dialogue-content",FOOTER:"moodle-dialogue-ft",HIDDEN:"hidden",LIGHTBOX:"moodle-dialogue-lightbox"},M.core=M.core||{};var j,k="Moodle dialogue",l=c+"-fullscreen",m=c+"-hidden",n=" [role=dialog]",o="[role=menubar]",p=".",q="moodle-has-zindex",r='input:not([type="hidden"]), a[href], button, textarea, select, [tabindex]';j=function(b){var c=a.clone(b);c.COUNT=a.stamp(this);var d="moodle-dialogue-"+c.COUNT;c.notificationBase=a.Node.create('<div class="'+i.BASE+'">').append(a.Node.create('<div id="'+d+'" role="dialog" aria-labelledby="'+d+'-header-text" class="'+i.WRAP+'"></div>').append(a.Node.create('<div id="'+d+'-header-text" class="'+i.HEADER+' yui3-widget-hd"></div>')).append(a.Node.create('<div class="'+i.BODY+' yui3-widget-bd"></div>')).append(a.Node.create('<div class="'+i.FOOTER+' yui3-widget-ft"></div>'))),a.one(document.body).append(c.notificationBase),c.additionalBaseClass&&c.notificationBase.addClass(c.additionalBaseClass),c.srcNode="#"+d,c.closeButton===!1?c.buttons=null:c.buttons=[{section:a.WidgetStdMod.HEADER,classNames:"closebutton",action:function(){this.hide()}}],j.superclass.constructor.apply(this,[c]),c.closeButton!==!1&&this.get("buttons").header[0].setAttribute("title",this.get("closeButtonTitle"))},a.extend(j,a.Panel,{_resizeevent:null,_orientationevent:null,_calculatedzindex:!1,_originalPosition:null,_hiddenSiblings:null,initializer:function(){var b;this._hiddenSiblings=[],this.get("render")&&this.render(),this.after("visibleChange",this.visibilityChanged,this),this.get("center")&&this.centerDialogue(),this.get("modal")&&(this.get(d).set("aria-hidden","true"),this.plug(a.M.core.LockScroll)),b=this.get("boundingBox"),b.addClass(q),a.Array.each(this.get("extraClasses"),b.addClass,b),this.get("visible")&&this.applyZIndex(),this.on("maskShow",this.applyZIndex),this.on("maskShow",function(){var b=a.one(a.config.win),c=this.get("boundingBox");this.get("center")||(this._originalPosition=c.getXY()),"fixed"!==c.getStyle("position")&&c.setStyles({top:b.get("scrollTop"),left:b.get("scrollLeft")})},this),this.after("destroyedChange",function(){this.get(d).remove(!0)},this)},applyZIndex:function(){var b=1,c=1,d=this.get("boundingBox"),e=this.get("maskNode"),f=this.get("zIndex");0===f||this._calculatedzindex?(a.all(n+", "+o+", "+p+q).each(function(a){var c=this.findZIndex(a);c>b&&(b=c)},this),c=(b+1).toString(),d.setStyle("zIndex",c),this.set("zIndex",c),this.get("modal")&&(e.setStyle("zIndex",c),a.UA.ie&&a.UA.compareVersions(a.UA.ie,9)<0&&setTimeout(function(){e.setStyle("position","static"),setTimeout(function(){e.setStyle("position","fixed")},0)},0)),this._calculatedzindex=!0):d.setStyle("zIndex",f)},findZIndex:function(a){var b=a.getStyle("zIndex")||a.ancestor().getStyle("zIndex");return b?parseInt(b,10):0},visibilityChanged:function(b){var c,d;"visible"===b.attrName&&(this.get("maskNode").addClass(i.LIGHTBOX),b.prevVal&&!b.newVal&&(d=this.get("boundingBox"),this._resizeevent&&(this._resizeevent.detach(),this._resizeevent=null),this._orientationevent&&(this._orientationevent.detach(),this._orientationevent=null),d.detach("key",this.keyDelegation),this.get("modal")&&this.setAccessibilityHidden()),!b.prevVal&&b.newVal&&(this.applyZIndex(),this.makeResponsive(),this.shouldResizeFullscreen()||this.get("draggable")&&(c="#"+this.get("id")+" ."+i.HEADER,this.plug(a.Plugin.Drag,{handles:[c]}),a.one(c).setStyle("cursor","move")),this.keyDelegation(),this.get("modal")&&this.setAccessibilityVisible()),this.get("center")&&!b.prevVal&&b.newVal&&this.centerDialogue())},makeResponsive:function(){var a=this.get("boundingBox");this.shouldResizeFullscreen()?(a.addClass(l),a.setStyles({left:null,top:null,width:null,height:null,right:null,bottom:null})):this.get("responsive")&&a.removeClass(l).setStyles({width:this.get("width"),height:this.get("height")}),this.lockScroll&&this.lockScroll.updateScrollLock(this.shouldResizeFullscreen())},centerDialogue:function(){var b,c,d=this.get("boundingBox"),e=d.hasClass(m);this.shouldResizeFullscreen()||(e&&d.setStyle("top","-1000px").removeClass(m),b=Math.max(Math.round((d.get("winWidth")-d.get("offsetWidth"))/2),15),c=Math.max(Math.round((d.get("winHeight")-d.get("offsetHeight"))/2),15)+a.one(window).get("scrollTop"),d.setStyles({left:b,top:c}),e&&d.addClass(m),this.makeResponsive())},shouldResizeFullscreen:function(){return window===window.parent&&this.get("responsive")&&Math.floor(a.one(document.body).get("winWidth"))<this.get("responsiveWidth")},show:function(){var a=null,b=this.headerNode,c=this.bodyNode,d=this.get("focusOnShowSelector"),e=null;return a=j.superclass.show.call(this),!this.get("center")&&this._originalPosition&&this.get("boundingBox").setXY(this._originalPosition),null!==d&&(e=this.get("boundingBox").one(d)),e||(b&&""!==b?e=b:c&&""!==c&&(e=c)),e&&e.focus(),a},hide:function(a){if(!a||"key"!==a.type||27!==a.keyCode||this.get("focused"))return this.lockScroll&&this.lockScroll.disableScrollLock(),j.superclass.hide.call(this,arguments)},keyDelegation:function(){var a=this.get("boundingBox");a.delegate("key",function(a){var b=a.target,c="forward";a.shiftKey&&(c="backward"),this.trapFocus(b,c)&&a.preventDefault()},"down:9",r,this)},trapFocus:function(a,b){var c=this.get("boundingBox"),d=c.one(r),e=c.all(r).pop();return a===e&&"forward"===b?d.focus():a===d&&"backward"===b?e.focus():void 0},setAccessibilityVisible:function(){var b=this.get(d);a.one(document.body).get("children").each(function(a){if(a!==b){var c=a.get("aria-hidden");"true"!==c&&(a.setData("previous-aria-hidden",c),this._hiddenSiblings.push(a),a.set("aria-hidden","true"))}},this),b.set("aria-hidden","false")},setAccessibilityHidden:function(){var b=this.get(d);b.set("aria-hidden","true"),a.Array.each(this._hiddenSiblings,function(a){var b=a.getData("previous-aria-hidden");null===b?a.removeAttribute("aria-hidden"):a.set("aria-hidden",b)}),this._hiddenSiblings=[]}},{NAME:k,CSS_PREFIX:c,ATTRS:{notificationBase:{},lightbox:{lazyAdd:!1,setter:function(a){this.set("modal",a)}},closeButton:{validator:a.Lang.isBoolean,value:!0},closeButtonTitle:{validator:a.Lang.isString,value:M.util.get_string("closebuttontitle","moodle")},center:{validator:a.Lang.isBoolean,value:!0},draggable:{validator:a.Lang.isBoolean,value:!1},COUNT:{value:null},responsive:{validator:a.Lang.isBoolean,value:!0},responsiveWidth:{value:768},focusOnShowSelector:{value:null}}}),a.Base.modifyAttrs(j,{width:{value:"400px",setter:function(a){return"auto"===a?"":a}},visible:{value:!1},centered:{setter:function(a){return a&&this.set("center",!0),!1}},render:{value:!0,writeOnce:!0},extraClasses:{value:[]}}),a.Base.mix(j,[a.M.core.WidgetFocusAfterHide]),M.core.dialogue=j;var s=function(){s.superclass.constructor.apply(this,arguments)};a.extend(s,M.core.dialogue,{initializer:function(){this.show()}},{NAME:"Moodle information dialogue",CSS_PREFIX:c}),a.Base.modifyAttrs(s,{modal:{validator:a.Lang.isBoolean,value:!0}}),M.core.notification=M.core.notification||{},M.core.notification.info=s},"@VERSION@",{requires:["base","node","panel","escape","event-key","dd-plugin","moodle-core-widget-focusafterclose","moodle-core-lockscroll"]});