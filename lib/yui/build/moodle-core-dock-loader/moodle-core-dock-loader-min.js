YUI.add("moodle-core-dock-loader",function(a,b){M.core=M.core||{},M.core.dock=M.core.dock||{},M.core.dock.ensureMoveToIconExists=function(b){if(b.one(".moveto"))return!0;var c,d=a.Node.create('<input type="image" class="moveto customcommand requiresjs" />'),e=b.one(".block_action"),f="t/block_to_dock",g=b.one(".header .title h2");return a.one(document.body).hasClass("dir-rtl")&&(f+="_rtl"),d.setAttribute("alt",M.util.get_string("addtodock","block")),g&&d.setAttribute("title",a.Escape.html(M.util.get_string("dockblock","block",g.getHTML()))),d.setAttribute("src",M.util.image_url(f,"moodle")),e?e.prepend(d):(c=b.one(".header .title .commands"),!c&&b.one(".header .title")&&(c=a.Node.create('<div class="commands"></div>'),b.one(".header .title").append(c)),c.append(d)),!0},M.core.dock.loader=M.core.dock.loader||{},M.core.dock.loader.delegationEvents=[],M.core.dock.loader.initLoader=function(){var b,c=a.all(".block[data-instanceid][data-dockable]"),d=a.one(document.body);c.each(function(){parseInt(this.getData("instanceid"),10);M.core.dock.ensureMoveToIconExists(this)}),c.some(function(a){return a.hasClass("dock_on_load")})?a.use("moodle-core-dock",function(){M.core.dock.init()}):(b=function(b){var c,d=this.ancestor(".block[data-instanceid]"),e=d.getData("instanceid");b.halt();for(c in M.core.dock.loader.delegationEvents)(a.Lang.isNumber(c)||a.Lang.isString(c))&&M.core.dock.loader.delegationEvents[c].detach();d.addClass("dock_on_load"),a.use("moodle-core-dock",function(){M.util.set_user_preference("docked_block_instance_"+e,1),M.core.dock.init()})},M.core.dock.loader.delegationEvents.push(d.delegate("click",b,".moveto")),M.core.dock.loader.delegationEvents.push(d.delegate("key",b,".moveto","enter")))}},"@VERSION@",{requires:["escape"]});