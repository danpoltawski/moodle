YUI.add("moodle-calendar-info",function(a,b){var c="aria-controls",d="boundingBox",e="[data-core_calendar-title]",f="calendartable",g="core_calendar-",h=".",i="eventcontent",j="delay",k="eventtitle",l="innerHTML",m=function(){m.superclass.constructor.apply(this,arguments)};a.extend(m,a.Base,{_showTimer:null,_hideTimer:null,_panel:null,_currentDay:null,initializer:function(){var b=a.one(a.config.doc.body);b.delegate(["mouseenter","focus"],this._startShow,e,this),b.delegate(["mouseleave","blur"],this._startHide,e,this)},_initOverlay:function(){return this._panel||(this._panel=new a.Overlay({headerContent:a.Node.create('<h2 class="'+k+'"/>'),bodyContent:a.Node.create('<div class="'+i+'"/>'),visible:!1,render:!0}),this._panel.get(d).addClass("calendar-event-panel")),this},_startShow:function(b){this._isCurrentDayVisible(b.currentTarget)||(this._cancelHide()._cancelShow()._initOverlay(),this._showTimer=setTimeout(a.bind(function(){var a=b.target.ancestor(e,!0);this._show(a)},this),this.get(j)))},_show:function(b){var e=this._panel.get(d),j=a.WidgetPositionAlign,m=b.ancestor(h+f);e.one(h+k).set(l,b.getData(g+"title")),e.one(h+i).set(l,b.getData(g+"popupcontent")),this._currentDay&&this._currentDay.setAttribute(c,null),b.setAttribute(c,b.get("id")),b.appendChild(e),this._currentDay=b,this._panel.constrain(m),this._panel.set("width",m.get("offsetWidth")+"px").align(m,[j.TC,j.TC]).show(),e.setAttribute("tabindex","0").focus()},_cancelShow:function(){return this._showTimer&&clearTimeout(this._showTimer),this},_startHide:function(b){"blur"===b.type&&b.currentTarget.contains(b.target)||(this._cancelShow()._cancelHide(),this._hideTimer=setTimeout(a.bind(function(){this._hide()},this),this.get(j)))},_hide:function(){this._panel&&this._panel.hide()},_cancelHide:function(){return this._hideTimer&&clearTimeout(this._hideTimer),this},_isCurrentDayVisible:function(a){return!(!this._panel||!this._panel.get("visible"))&&a===this._currentDay}},{NAME:"calendarInfo",ATTRS:{delay:{value:300}}}),a.namespace("M.core_calendar.info").init=function(a){return new m(a)}},"@VERSION@",{requires:["base","node","event-mouseenter","event-key","overlay","moodle-calendar-info-skin"]});