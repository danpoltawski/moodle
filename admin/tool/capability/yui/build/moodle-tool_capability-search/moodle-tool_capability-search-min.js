YUI.add("moodle-tool_capability-search",function(a,b){var c=function(){c.superclass.constructor.apply(this,arguments)};c.prototype={form:null,select:null,selectoptions:{},input:null,button:null,lastsearch:null,initializer:function(){this.form=a.one("#capability-overview-form"),this.select=this.form.one("select[data-search=capability]"),this.select.setStyle("minWidth",this.select.get("offsetWidth")),this.select.get("options").each(function(a){var b=a.get("value");this.selectoptions[b]=a},this),this.button=this.form.all("input[type=submit]"),this.lastsearch=this.form.one("input[name=search]");var b=a.Node.create('<div id="capabilitysearchui"></div>'),c=a.Node.create('<label for="capabilitysearch">'+this.get("strsearch")+"</label>");this.input=a.Node.create('<input type="text" id="capabilitysearch" />'),b.append(c).append(this.input),this.select.insert(b,"before"),this.input.on("keyup",this.typed,this),this.select.on("change",this.validate,this),this.lastsearch&&(this.input.set("value",this.lastsearch.get("value")),this.typed(),this.select.one("option[selected]")&&this.select.set("scrollTop",this.select.one("option[selected]").get("getX"))),this.validate()},validate:function(){this.button.set("disabled",""===this.select.get("value"))},typed:function(){var a,b=this.input.get("value"),c=0,d=null;this.lastsearch&&this.lastsearch.set("value",b),this.select.all("option").remove();for(a in this.selectoptions)a.indexOf(b)>=0&&(c++,d=this.selectoptions[a],this.select.append(this.selectoptions[a]));0===c?this.input.addClass("error"):(this.input.removeClass("error"),1===c&&d.set("selected",!0)),this.validate()}},a.extend(c,a.Base,c.prototype,{NAME:"tool_capability-search",ATTRS:{strsearch:{}}}),M.tool_capability=M.tool_capability||{},M.tool_capability.init_capability_search=function(a){new c(a)}},"@VERSION@",{requires:["base","node"]});