YUI.add("moodle-core_outcome-ariacontrol",function(e,t){var n="beforeToggle",r="afterToggle",i="beforeLabelToggle",s="afterLabelToggle",o="host",u="role",a="aria-label",f="aria-controls",l="boundingBox",c=e.Lang,h=function(){h.superclass.constructor.apply(this,arguments)};e.extend(h,e.Plugin.Base,{initializer:function(){this.get("role")!==""&&this.get("box").setAttribute(u,this.get("role")),this.get("event")!==""&&this.onHostEvent(this.get("event"),this.handle_host_event),this.get("key")!==""&&this.get(o).on("key",this.handle_host_event,this.get("key"),this),this.get("autoFocus")&&this.get(o).setAttribute("tabindex",this.get("tabIndex")),this.toggle_aria_label(),this._init_aria_controls(),this.after("ariaControlsChange",this._init_aria_controls)},_init_aria_controls:function(){c.isNull(this.get("ariaControls"))||this.get("box").setAttribute(f,this.get("ariaControls").generateID())},is_label_updating:function(){return this.get("beforeAriaLabel")!==""&&this.get("afterAriaLabel")!==""},handle_host_event:function(e){e.preventDefault(),this.toggle_state()},toggle_state:function(){this.fire(n),this.toggle_aria_label();if(!c.isNull(this.get("ariaControls"))&&!c.isUndefined(this.get("ariaControls").core_outcome_ariacontrolled)){var e=this.get("ariaControls").core_outcome_ariacontrolled;e.toggle_state(),this.get("autoFocus")&&!e.get("visible")&&this.get(o).focus()}this.fire(r)},toggle_aria_label:function(){if(!this.is_label_updating())return;this.fire(i);var e=this.get("box"),t="";!e.hasAttribute(a)||e.getAttribute(a)===this.get("afterAriaLabel")?t=this.get("beforeAriaLabel"):t=this.get("afterAriaLabel"),e.setAttribute(a,t),this.get("updateAriaLabelOnly")||(e.test("a")?e.setAttribute("title",t):e.test("img")?e.setAttribute("alt",t):e.test("button")&&e.set("text",t)),this.fire(s)},_get_data:function(e,t){var n=this.get(o).getData(e);return c.isUndefined(n)?t:n},_setAriaControls:function(t){return c.isNull(t)?null:e.one(t)},_validateAriaControls:function(t){return c.isNull(t)?!0:e.one(t)instanceof e.Node}},{NAME:t,NS:"core_outcome_ariacontrol",ATTRS:{role:{valueFn:function(){return this.get(o).hasAttribute("role")?this.get(o).getAttribute("role"):"button"},validator:c.isString,writeOnce:!0},tabIndex:{valueFn:function(){return this.get(o).hasAttribute("tabindex")?this.get(o).getAttribute("tabindex"):"-1"},validator:c.isString,writeOnce:!0},ariaControls:{value:null,validator:"_validateAriaControls",setter:"_setAriaControls"},event:{value:"click",validator:c.isString,writeOnce:!0},key:{value:"",validator:c.isString,writeOnce:!0},beforeAriaLabel:{valueFn:function(){return this._get_data("before-aria-label","")},validator:c.isString,setter:e.Escape.html},afterAriaLabel:{valueFn:function(){return this._get_data("after-aria-label","")},validator:c.isString,setter:e.Escape.html},updateAriaLabelOnly:{value:!1,validator:c.isBoolean},autoFocus:{value:!0,validator:c.isBoolean},box:{readOnly:!0,valueFn:function(){return this.get(o)instanceof e.Widget?this.get(o).get(l):this.get(o)}}}}),M.core_outcome=M.core_outcome||{},M.core_outcome.ariacontrol=h},"@VERSION@",{requires:["plugin","widget","escape"]});
