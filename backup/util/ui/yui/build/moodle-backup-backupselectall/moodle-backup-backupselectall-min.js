YUI.add("moodle-backup-backupselectall",function(a,b){M.core_backup=M.core_backup||{},M.core_backup.backupselectall=function(b){var c=null,d=function(b,d,e,f){b.preventDefault();var g="";"undefined"!=typeof f&&(g="setting_activity_"+f+"_");var h=e.length;a.all('input[type="checkbox"]').each(function(a){var b=a.get("name");g&&b.substring(0,g.length)!==g||b.substring(b.length-h)===e&&a.set("checked",d)}),c&&M.form&&M.form.updateFormState(c)},e=function(a,b,c,d){return"undefined"==typeof d&&(d=""),'<div class="'+a+'"><div class="fitem fitem_fcheckbox backup_selector"><div class="fitemtitle">'+c+'</div><div class="felement"><a id="backup-all-'+b+'" href="#">'+M.util.get_string("all","moodle")+'</a> / <a id="backup-none-'+b+'" href="#">'+M.util.get_string("none","moodle")+"</a>"+d+"</div></div></div>"},f=a.one("fieldset#id_coursesettings .fcontainer.clearfix .grouped_settings.section_level");if(f&&f.one('input[type="checkbox"]')){c=f.ancestor("form").getAttribute("id");var g=!1;a.all('input[type="checkbox"]').each(function(a){var b=a.get("name");"_userdata"===b.substring(b.length-9)?g="_userdata":"_userinfo"===b.substring(b.length-9)&&(g="_userinfo")});var h=e("include_setting section_level","included",M.util.get_string("select","moodle"),' (<a id="backup-bytype" href="#">'+M.util.get_string("showtypes","backup")+"</a>)");g&&(h+=e("normal_setting","userdata",M.util.get_string("select","moodle")));var i=a.Node.create('<div class="grouped_settings section_level">'+h+"</div>");f.insert(i,"before");var j=function(b,c){a.one("#backup-all-mod_"+c).on("click",function(a){d(a,!0,"_included",c)}),a.one("#backup-none-mod_"+c).on("click",function(a){d(a,!1,"_included",c)}),g&&(a.one("#backup-all-userdata-mod_"+c).on("click",function(a){d(a,!0,g,c)}),a.one("#backup-none-userdata-mod_"+c).on("click",function(a){d(a,!1,g,c)}))},k=a.Node.create('<div id="mod_select_links">');k.hide(),k.currentlyshown=!1,i.appendChild(k);for(var l in b)if(b.hasOwnProperty(l)){h=e("include_setting section_level","mod_"+l,b[l]),g&&(h+=e("normal_setting","userdata-mod_"+l,b[l]));var m=a.Node.create('<div class="grouped_settings section_level">'+h+"</div>");k.appendChild(m),j(m,l)}var n=function(){var b=a.one("#backup-bytype");k.currentlyshown?b.setHTML(M.util.get_string("showtypes","backup")):b.setHTML(M.util.get_string("hidetypes","backup")),k.currentlyshown=!k.currentlyshown;var c,d={node:k,duration:.2};k.currentlyshown?(k.show(),d.to={maxHeight:k.get("clientHeight")+"px"},k.setStyle("maxHeight","0px"),c=new a.Anim(d),c.on("end",function(){k.setStyle("maxHeight","none")}),c.run()):(d.to={maxHeight:"0px"},k.setStyle("maxHeight",k.get("clientHeight")+"px"),c=new a.Anim(d),c.on("end",function(){k.hide(),k.setStyle("maxHeight","none")}),c.run())};a.one("#backup-bytype").on("click",function(a){a.preventDefault(),n()}),a.one("#backup-all-included").on("click",function(a){d(a,!0,"_included")}),a.one("#backup-none-included").on("click",function(a){d(a,!1,"_included")}),g&&(a.one("#backup-all-userdata").on("click",function(a){d(a,!0,g)}),a.one("#backup-none-userdata").on("click",function(a){d(a,!1,g)}))}}},"@VERSION@",{requires:["node","event","node-event-simulate","anim"]});