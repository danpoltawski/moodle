YUI.add("moodle-availability_profile-form",function(a,b){M.availability_profile=M.availability_profile||{},M.availability_profile.form=a.Object(M.core_availability.plugin),M.availability_profile.form.profiles=null,M.availability_profile.form.initInner=function(a,b){this.standardFields=a,this.customFields=b},M.availability_profile.form.getNode=function(b){for(var c,d='<span class="availability-group"><label><span class="p-r-1">'+M.util.get_string("conditiontitle","availability_profile")+'</span> <select name="field" class="custom-select"><option value="choose">'+M.util.get_string("choosedots","moodle")+"</option>",e=0;e<this.standardFields.length;e++)c=this.standardFields[e],d+='<option value="sf_'+c.field+'">'+c.display+"</option>";for(e=0;e<this.customFields.length;e++)c=this.customFields[e],d+='<option value="cf_'+c.field+'">'+c.display+"</option>";d+='</select></label> <label><span class="accesshide">'+M.util.get_string("label_operator","availability_profile")+' </span><select name="op" title="'+M.util.get_string("label_operator","availability_profile")+'" class="custom-select">';var f=["isequalto","contains","doesnotcontain","startswith","endswith","isempty","isnotempty"];for(e=0;e<f.length;e++)d+='<option value="'+f[e]+'">'+M.util.get_string("op_"+f[e],"availability_profile")+"</option>";d+='</select></label> <label><span class="accesshide">'+M.util.get_string("label_value","availability_profile")+'</span><input name="value" type="text" class="form-control" style="width: 10em" title="'+M.util.get_string("label_value","availability_profile")+'"/></label></span>';var g=a.Node.create('<span class="form-inline">'+d+"</span>");if(void 0!==b.sf&&g.one("select[name=field] > option[value=sf_"+b.sf+"]")?g.one("select[name=field]").set("value","sf_"+b.sf):void 0!==b.cf&&g.one("select[name=field] > option[value=cf_"+b.cf+"]")&&g.one("select[name=field]").set("value","cf_"+b.cf),void 0!==b.op&&g.one("select[name=op] > option[value="+b.op+"]")&&(g.one("select[name=op]").set("value",b.op),"isempty"!==b.op&&"isnotempty"!==b.op||g.one("input[name=value]").set("disabled",!0)),void 0!==b.v&&g.one("input").set("value",b.v),!M.availability_profile.form.addedEvents){M.availability_profile.form.addedEvents=!0;var h=function(a){var b=a.ancestor("span.availability_profile"),c=b.one("select[name=op]"),d="isempty"===c.get("value")||"isnotempty"===c.get("value");b.one("input[name=value]").set("disabled",d),M.core_availability.form.update()},i=a.one(".availability-field");i.delegate("change",function(){h(this)},".availability_profile select"),i.delegate("change",function(){h(this)},".availability_profile input[name=value]")}return g},M.availability_profile.form.fillValue=function(a,b){var c=b.one("select[name=field]").get("value");"sf_"===c.substr(0,3)?a.sf=c.substr(3):"cf_"===c.substr(0,3)&&(a.cf=c.substr(3)),a.op=b.one("select[name=op]").get("value");var d=b.one("input[name=value]");d.get("disabled")||(a.v=d.get("value"))},M.availability_profile.form.fillErrors=function(a,b){var c={};this.fillValue(c,b),void 0===c.sf&&void 0===c.cf&&a.push("availability_profile:error_selectfield"),void 0!==c.v&&/^\s*$/.test(c.v)&&a.push("availability_profile:error_setvalue")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});